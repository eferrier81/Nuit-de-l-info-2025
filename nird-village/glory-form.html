<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulaire de la Gloire - Village Num√©rique R√©sistant</title>
  <meta name="description" content="Formulaire de contact √©pique fa√ßon c√©r√©monie de remise de prix : vivez le message ‚ÄòF√©licitations, vous avez gagn√© !‚Äô comme un moment de gloire." />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    :root {
      --glory-gold: var(--color-accent);
      --glory-gold-soft: #fef3c7;
      --glory-purple: #4b5563;
      --glory-deep: #020617;
      --glory-accent: var(--color-primary);
    }

    body.glory-body {
      min-height: 100vh;
      margin: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, var(--color-bg-soft) 0, var(--color-bg) 40%, #000000 100%);
      color: var(--color-text);
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .glory-wrapper {
      width: 100%;
      max-width: 920px;
      padding: 1.5rem 1.25rem 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      position: relative;
    }

    .glory-back-link {
      font-size: 0.85rem;
      color: var(--glory-gold-soft);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      opacity: 0.9;
    }

    .glory-back-link:hover {
      text-decoration: underline;
    }

    .glory-stage {
      position: relative;
      border-radius: 18px;
      padding: 1.5rem 1.5rem 1.75rem;
      background:
        radial-gradient(circle at top center, rgba(251, 191, 36, 0.35) 0, transparent 55%),
        linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(251, 191, 36, 0.4);
      box-shadow:
        0 18px 45px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .glory-spotlight {
      position: absolute;
      inset: -20%;
      pointer-events: none;
      background:
        radial-gradient(circle at 15% -10%, rgba(255, 255, 255, 0.07) 0, transparent 55%),
        radial-gradient(circle at 85% -10%, rgba(255, 255, 255, 0.07) 0, transparent 55%),
        radial-gradient(circle at 50% -20%, rgba(255, 216, 107, 0.18) 0, transparent 55%);
      mix-blend-mode: screen;
      opacity: 0.9;
      animation: glory-spotlights 12s infinite alternate ease-in-out;
    }

    @keyframes glory-spotlights {
      0% {
        transform: translateX(-3%) rotate(-1deg);
      }
      50% {
        transform: translateX(3%) rotate(1deg);
      }
      100% {
        transform: translateX(-2%) rotate(0deg);
      }
    }

    .glory-header {
      position: relative;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 1.25rem;
      z-index: 1;
    }

    .glory-title-block {
      max-width: 480px;
    }

    .glory-eyebrow {
      font-size: 0.8rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--glory-gold-soft);
      opacity: 0.9;
      margin-bottom: 0.4rem;
    }

    .glory-title {
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin: 0 0 0.4rem;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 0.35rem;
    }

    .glory-title span.glory-title-main {
      background: linear-gradient(120deg, var(--glory-gold), #ffffff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .glory-subtitle {
      font-size: 0.9rem;
      color: var(--color-text-muted);
      max-width: 32rem;
    }

    .glory-mini-trophy {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.15rem;
      min-width: 90px;
      font-size: 0.8rem;
      color: var(--glory-gold-soft);
      cursor: default;
    }

    .glory-mini-trophy-icon {
      font-size: 1.8rem;
      filter: drop-shadow(0 0 10px rgba(255, 216, 107, 0.7));
      transition: transform 0.25s ease, filter 0.25s ease;
    }

    .glory-mini-trophy:hover .glory-mini-trophy-icon {
      transform: translateY(-3px) rotate(-4deg);
      filter: drop-shadow(0 0 16px rgba(255, 216, 107, 1));
    }

    .glory-main {
      position: relative;
      display: grid;
      grid-template-columns: minmax(0, 1.45fr) minmax(0, 1fr);
      gap: 1.5rem;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .glory-main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .glory-form-card {
      background: linear-gradient(160deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      border-radius: 16px;
      padding: 1.1rem 1.1rem 1.25rem;
      border: 1px solid rgba(255, 216, 107, 0.35);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.75);
    }

    .glory-form-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.8rem 1rem;
      margin-bottom: 0.9rem;
    }

    @media (max-width: 640px) {
      .glory-form-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .glory-field {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      font-size: 0.85rem;
    }

    .glory-label {
      font-weight: 600;
      color: var(--glory-gold-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.3rem;
    }

    .glory-label span.glory-required {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #ffb9c9;
    }

    .glory-input,
    .glory-textarea {
      border-radius: 999px;
      border: 1px solid rgba(255, 216, 107, 0.45);
      padding: 0.45rem 0.75rem;
      font-size: 0.85rem;
      background: rgba(7, 3, 20, 0.9);
      color: #fef9f0;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    }

    .glory-textarea {
      min-height: 120px;
      border-radius: 16px;
      resize: vertical;
      padding: 0.6rem 0.8rem;
    }

    .glory-input::placeholder,
    .glory-textarea::placeholder {
      color: #b7a5d4;
      font-size: 0.8rem;
    }

    .glory-input:focus-visible,
    .glory-textarea:focus-visible {
      border-color: var(--glory-gold);
      box-shadow: 0 0 0 1px var(--glory-gold), 0 0 20px rgba(255, 216, 107, 0.35);
      background: rgba(14, 5, 40, 0.98);
    }

    .glory-input.glory-error,
    .glory-textarea.glory-error {
      border-color: #ff7b8f;
      box-shadow: 0 0 0 1px rgba(255, 123, 143, 0.6);
    }

    .glory-error-text {
      font-size: 0.75rem;
      color: #ff9cab;
    }

    .glory-hint {
      font-size: 0.75rem;
      color: #d8c6ff;
      opacity: 0.9;
    }

    .glory-cta-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.7rem;
      margin-top: 0.4rem;
    }

    .glory-submit-btn {
      border-radius: 999px;
      border: none;
      padding: 0.6rem 1.4rem;
      font-weight: 700;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      cursor: pointer;
      background: linear-gradient(130deg, var(--glory-gold), #ffffff, var(--glory-gold));
      color: #3b2203;
      box-shadow:
        0 10px 20px rgba(0, 0, 0, 0.7),
        0 0 25px rgba(255, 216, 107, 0.85);
      transform-origin: center;
      transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
    }

    .glory-submit-btn:hover,
    .glory-submit-btn:focus-visible {
      transform: translateY(-2px) scale(1.02);
      box-shadow:
        0 14px 26px rgba(0, 0, 0, 0.85),
        0 0 35px rgba(255, 216, 107, 1);
      filter: saturate(1.1);
    }

    .glory-footnote {
      font-size: 0.75rem;
      color: #d5c9ff;
      max-width: 260px;
    }

    .glory-side-card {
      background: linear-gradient(175deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      border-radius: 16px;
      padding: 1rem 1rem 1.2rem;
      border: 1px solid rgba(178, 145, 255, 0.4);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.72);
      font-size: 0.82rem;
      color: #f1e8ff;
      position: relative;
      overflow: hidden;
    }

    .glory-side-card::before {
      content: "";
      position: absolute;
      inset: -20%;
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 107, 214, 0.18) 0, transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(107, 172, 255, 0.18) 0, transparent 55%);
      mix-blend-mode: screen;
      opacity: 0.8;
    }

    .glory-side-content {
      position: relative;
      z-index: 1;
    }

    .glory-side-title {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      margin-bottom: 0.5rem;
      font-size: 0.75rem;
      color: #f9e6ff;
    }

    .glory-side-main {
      font-size: 0.85rem;
      margin-bottom: 0.6rem;
    }

    .glory-side-bullets {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .glory-side-bullets li {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 0.25rem;
    }

    .glory-side-bullet-icon {
      color: var(--glory-accent);
    }

    .glory-secret-tag {
      margin-top: 0.55rem;
      font-size: 0.7rem;
      color: #ffe5ff;
      opacity: 0.8;
      cursor: pointer;
      -webkit-user-select: none;
      user-select: none;
    }

    .glory-secret-tag:hover {
      text-decoration: underline;
    }

    /* Popup de victoire */
    .glory-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.98));
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 60;
    }

    .glory-overlay.is-visible {
      display: flex;
      animation: glory-overlay-in 0.35s ease-out forwards;
    }

    @keyframes glory-overlay-in {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .glory-popup {
      position: relative;
      width: min(480px, 100% - 2.5rem);
      background: radial-gradient(circle at top, #1b0f35 0, #04000a 60%);
      border-radius: 20px;
      padding: 1.6rem 1.5rem 1.45rem;
      border: 1px solid rgba(255, 216, 107, 0.65);
      box-shadow:
        0 22px 55px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(255, 216, 107, 0.7);
      color: #fff7dd;
      overflow: hidden;
      transform-origin: center;
      animation: glory-popup-in 0.45s cubic-bezier(0.25, 1.4, 0.4, 1) forwards;
    }

    @keyframes glory-popup-in {
      0% {
        transform: scale(0.5) translateY(60px);
        opacity: 0;
      }
      60% {
        transform: scale(1.05) translateY(-8px);
        opacity: 1;
      }
      100% {
        transform: scale(1) translateY(0);
      }
    }

    .glory-popup-ribbon {
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 107, 214, 0.35) 0, transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(107, 172, 255, 0.35) 0, transparent 55%),
        radial-gradient(circle at 50% 100%, rgba(255, 216, 107, 0.4) 0, transparent 55%);
      mix-blend-mode: screen;
      opacity: 0.9;
      pointer-events: none;
      animation: glory-ribbon 9s infinite alternate ease-in-out;
    }

    @keyframes glory-ribbon {
      0% {
        transform: rotate(-4deg) translateX(-3%);
      }
      50% {
        transform: rotate(2deg) translateX(2%);
      }
      100% {
        transform: rotate(-2deg) translateX(0%);
      }
    }

    .glory-popup-content {
      position: relative;
      z-index: 1;
      text-align: center;
    }

    .glory-popup-trophy {
      font-size: 2.4rem;
      margin-bottom: 0.4rem;
      filter: drop-shadow(0 0 18px rgba(255, 216, 107, 0.9));
      animation: glory-trophy-bounce 1.2s ease-out infinite alternate;
    }

    @keyframes glory-trophy-bounce {
      from {
        transform: translateY(0) scale(1);
      }
      to {
        transform: translateY(-4px) scale(1.04);
      }
    }

    .glory-popup-title {
      font-size: 1.4rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 0.4rem;
    }

    .glory-popup-subtitle {
      font-size: 0.94rem;
      margin-bottom: 0.4rem;
    }

    .glory-popup-message {
      font-size: 0.85rem;
      color: #fff1cf;
      margin-bottom: 0.9rem;
    }

    .glory-popup-close {
      border-radius: 999px;
      border: none;
      padding: 0.5rem 1.4rem;
      font-size: 0.82rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      cursor: pointer;
      background: linear-gradient(120deg, #ffffff, var(--glory-gold));
      color: #402402;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.8);
    }

    .glory-popup-close:hover,
    .glory-popup-close:focus-visible {
      transform: translateY(-1px);
    }

    .glory-popup-footnote {
      font-size: 0.7rem;
      opacity: 0.9;
      margin-top: 0.6rem;
    }

    /* Confettis simples */
    .glory-confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 55;
    }

    .glory-confetti-piece {
      position: absolute;
      width: 6px;
      height: 14px;
      border-radius: 2px;
      opacity: 0.9;
      animation: glory-confetti-fall linear forwards;
    }

    @keyframes glory-confetti-fall {
      0% {
        transform: translate3d(0, -10%, 0) rotateZ(0deg);
      }
      100% {
        transform: translate3d(var(--confetti-drift, 40px), 110%, 0) rotateZ(360deg);
      }
    }

    /* Th√®me alternatif via Konami code */
    body.glory-body.glory-alt-theme {
      background: radial-gradient(circle at center, #000000 0, #061827 35%, #000000 90%);
    }

    body.glory-body.glory-alt-theme .glory-stage {
      background:
        radial-gradient(circle at 50% -20%, rgba(107, 172, 255, 0.3) 0, transparent 55%),
        linear-gradient(135deg, rgba(2, 8, 20, 0.96), rgba(2, 22, 40, 0.98));
      border-color: rgba(107, 172, 255, 0.7);
    }

    body.glory-body.glory-alt-theme .glory-submit-btn {
      background: linear-gradient(130deg, #6bacff, #ffffff, #ff7bd5);
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.8), 0 0 35px rgba(107, 172, 255, 0.9);
    }

    body.glory-body.glory-alt-theme .glory-side-card {
      border-color: rgba(107, 172, 255, 0.8);
    }

    body.glory-body.glory-alt-theme .glory-mini-trophy-icon {
      filter: drop-shadow(0 0 12px rgba(107, 172, 255, 0.9));
    }
  </style>
</head>
<body class="glory-body">
  <div class="glory-wrapper">
    <a href="index.html" class="glory-back-link">‚¨Ö Retour au village</a>

    <section class="glory-stage" aria-labelledby="glory-title">
      <div class="glory-spotlight" aria-hidden="true"></div>

      <header class="glory-header">
        <div class="glory-title-block">
          <p class="glory-eyebrow">Nuit de l'Info ¬∑ Village Num√©rique R√©sistant</p>
          <h1 id="glory-title" class="glory-title">
            <span class="glory-title-main">Formulaire de la Gloire</span>
            <span>üèÜ</span>
          </h1>
          <p class="glory-subtitle">
            Raconte-nous ton exploit num√©rique, ton id√©e folle ou ton envie de lib√©rer un √©tablissement.
            Au bout du clic&nbsp;: une <strong>c√©r√©monie de remise de prix</strong> rien que pour toi.
          </p>
        </div>
        <div class="glory-mini-trophy" aria-hidden="true">
          <div class="glory-mini-trophy-icon" id="glory-side-trophy">üèÜ</div>
          <div>Gloire potentielle : 100%</div>
        </div>
      </header>

      <div class="glory-main">
        <div class="glory-form-card">
          <form id="glory-form" novalidate>
            <div class="glory-form-grid">
              <div class="glory-field">
                <label class="glory-label" for="glory-name">
                  Nom
                  <span class="glory-required">requis</span>
                </label>
                <input
                  id="glory-name"
                  name="name"
                  class="glory-input"
                  type="text"
                  required
                  autocomplete="name"
                  placeholder="Votre nom de h√©ros ou d'h√©ro√Øne"
                />
                <p class="glory-error-text" data-error-for="glory-name"></p>
              </div>

              <div class="glory-field">
                <label class="glory-label" for="glory-email">
                  Email
                  <span class="glory-required">requis</span>
                </label>
                <input
                  id="glory-email"
                  name="email"
                  class="glory-input"
                  type="email"
                  required
                  autocomplete="email"
                  placeholder="adresse@exemple.fr (pour recevoir ton troph√©e fictif)"
                />
                <p class="glory-error-text" data-error-for="glory-email"></p>
              </div>

              <div class="glory-field">
                <label class="glory-label" for="glory-subject">
                  Sujet
                  <span class="glory-required">requis</span>
                </label>
                <input
                  id="glory-subject"
                  name="subject"
                  class="glory-input"
                  type="text"
                  required
                  placeholder="Titre de votre exploit (ex. ‚ÄòMigration h√©ro√Øque vers Linux‚Äô)."
                />
                <p class="glory-error-text" data-error-for="glory-subject"></p>
              </div>

              <div class="glory-field">
                <label class="glory-label" for="glory-message">
                  Message
                  <span class="glory-required">requis</span>
                </label>
                <textarea
                  id="glory-message"
                  name="message"
                  class="glory-textarea"
                  required
                  minlength="30"
                  placeholder="Racontez votre r√©ussite, votre id√©e ou votre appel √† l'aide‚Ä¶ en au moins 30 caract√®res."
                ></textarea>
                <p class="glory-error-text" data-error-for="glory-message"></p>
              </div>
            </div>

            <p class="glory-hint">
              Astuce : plus votre message est d√©taill√©, plus la c√©r√©monie de remise de prix sera convaincante (promis, on fait semblant tr√®s fort).
            </p>

            <div class="glory-cta-row">
              <button type="submit" class="glory-submit-btn">Invoquer la Gloire</button>
              <p class="glory-footnote">
                Aucun v√©ritable mail ne sera envoy√© : ceci est une <strong>c√©r√©monie de gloire simul√©e</strong> pour la Nuit de l'Info.
              </p>
            </div>
          </form>
        </div>

        <aside class="glory-side-card" aria-label="Infos bonus sur la gloire">
          <div class="glory-side-content">
            <p class="glory-side-title">mode c√©r√©monie activ√©</p>
            <p class="glory-side-main">
              √Ä la validation, les projecteurs s'allument, les confettis tombent et
              la phrase sacr√©e appara√Æt : <strong>¬´ F√©licitations, vous avez gagn√© ! ¬ª</strong>
            </p>
            <ul class="glory-side-bullets">
              <li>
                <span class="glory-side-bullet-icon">‚ú®</span>
                <span>Formulaire 100 % fonctionnel (validation front, simulation d'envoi).</span>
              </li>
              <li>
                <span class="glory-side-bullet-icon">üé≠</span>
                <span>Univers visuel fa√ßon c√©r√©monie de remise de prix.</span>
              </li>
              <li>
                <span class="glory-side-bullet-icon">üïµÔ∏è‚Äç‚ôÄÔ∏è</span>
                <span>√âtranges rumeurs parlent de secrets cach√©s sur cette page‚Ä¶</span>
              </li>
            </ul>
            <p class="glory-secret-tag" id="glory-secret-click">(Ne cliquez surtout pas ici. Vraiment.)</p>
          </div>
        </aside>
      </div>
    </section>
  </div>

  <!-- Overlay de victoire -->
  <div class="glory-overlay" id="glory-overlay" role="dialog" aria-modal="true" aria-labelledby="glory-overlay-title" aria-hidden="true">
    <div class="glory-confetti" id="glory-confetti" aria-hidden="true"></div>
    <div class="glory-popup">
      <div class="glory-popup-ribbon" aria-hidden="true"></div>
      <div class="glory-popup-content">
        <div class="glory-popup-trophy">üèÜ</div>
        <h2 id="glory-overlay-title" class="glory-popup-title">F√©licitations, vous avez gagn√© !</h2>
        <p class="glory-popup-subtitle">
          Le <strong>Grand Jury du Village Num√©rique R√©sistant</strong> vient de d√©lib√©rer : votre message vient
          d'obtenir la <em>Gloire Absolue</em> dans la cat√©gorie ¬´ Formulaire √âpique ¬ª.
        </p>
        <p class="glory-popup-message" id="glory-popup-message">
          Votre histoire rejoint d√©sormais la grande l√©gende des √©tablissements qui osent un num√©rique plus libre,
          plus responsable et plus fun. Merci pour votre participation h√©ro√Øque √† cette Nuit de l'Info.
        </p>
        <button type="button" class="glory-popup-close" id="glory-popup-close">Revenir sur sc√®ne</button>
        <p class="glory-popup-footnote">
          (Astuce jury : rechargez la page, changez de sujet, tentez quelques combinaisons de touches‚Ä¶ on ne sait jamais.)
        </p>
      </div>
    </div>
  </div>

  <script>
    // Script principal du "Formulaire de la Gloire"
    // Contient : validation, simulation d'envoi, popup de victoire et easter eggs.

    (function () {
      const form = document.getElementById('glory-form');
      const overlay = document.getElementById('glory-overlay');
      const popupClose = document.getElementById('glory-popup-close');
      const confettiContainer = document.getElementById('glory-confetti');
      const popupMessage = document.getElementById('glory-popup-message');
      const subjectInput = document.getElementById('glory-subject');
      const nameInput = document.getElementById('glory-name');
      const emailInput = document.getElementById('glory-email');
      const messageInput = document.getElementById('glory-message');
      const secretClick = document.getElementById('glory-secret-click');
      const body = document.body;

      function setError(input, message) {
        const errorEl = document.querySelector('[data-error-for="' + input.id + '"]');
        if (!errorEl) return;
        if (message) {
          input.classList.add('glory-error');
          errorEl.textContent = message;
        } else {
          input.classList.remove('glory-error');
          errorEl.textContent = '';
        }
      }

      function validateEmail(value) {
        return /.+@.+\..+/.test(value);
      }

      function validateForm() {
        let valid = true;

        if (!nameInput.value.trim()) {
          setError(nameInput, 'Nous avons besoin de votre nom pour graver le troph√©e.');
          valid = false;
        } else {
          setError(nameInput);
        }

        const emailValue = emailInput.value.trim();
        if (!emailValue) {
          setError(emailInput, 'Une adresse est n√©cessaire pour envoyer la gloire (m√™me fictive).');
          valid = false;
        } else if (!validateEmail(emailValue)) {
          setError(emailInput, "Ce format d'email semble peu compatible avec les projecteurs.");
          valid = false;
        } else {
          setError(emailInput);
        }

        if (!subjectInput.value.trim()) {
          setError(subjectInput, 'Donnez un titre h√©ro√Øque √† votre exploit.');
          valid = false;
        } else {
          setError(subjectInput);
        }

        const msgValue = messageInput.value.trim();
        if (!msgValue) {
          setError(messageInput, 'La gloire a besoin de r√©cit : quelques lignes au moins.');
          valid = false;
        } else if (msgValue.length < 30) {
          setError(messageInput, 'Minimum 30 caract√®res pour une l√©gende digne de ce nom.');
          valid = false;
        } else {
          setError(messageInput);
        }

        return valid;
      }

      function openOverlay(customText) {
        if (customText) {
          popupMessage.textContent = customText;
        }
        overlay.classList.add('is-visible');
        overlay.setAttribute('aria-hidden', 'false');
        popupClose.focus();
        launchConfetti();
      }

      function closeOverlay() {
        overlay.classList.remove('is-visible');
        overlay.setAttribute('aria-hidden', 'true');
        confettiContainer.innerHTML = '';
      }

      function launchConfetti() {
        confettiContainer.innerHTML = '';
        const pieces = 80;
        const colors = ['#ffd86b', '#ff6bb5', '#6bacff', '#ffffff'];
        for (let i = 0; i < pieces; i++) {
          const piece = document.createElement('div');
          piece.className = 'glory-confetti-piece';
          const left = Math.random() * 100;
          const delay = Math.random() * 0.6;
          const duration = 2.2 + Math.random() * 0.8;
          const color = colors[Math.floor(Math.random() * colors.length)];
          const drift = (Math.random() - 0.5) * 120;
          piece.style.left = left + '%';
          piece.style.backgroundColor = color;
          piece.style.animationDuration = duration + 's';
          piece.style.animationDelay = delay + 's';
          piece.style.setProperty('--confetti-drift', drift + 'px');
          confettiContainer.appendChild(piece);
        }
      }

      form.addEventListener('submit', function (event) {
        event.preventDefault();
        if (!validateForm()) {
          return;
        }

        const formData = {
          name: nameInput.value.trim(),
          email: emailInput.value.trim(),
          subject: subjectInput.value.trim(),
          message: messageInput.value.trim(),
        };

        let customText =
          'Votre histoire rejoint d√©sormais la grande l√©gende des √©tablissements qui osent un num√©rique plus libre, plus responsable et plus fun. Merci pour votre participation h√©ro√Øque √† cette Nuit de l\'Info.';

        const subjectLower = formData.subject.toLowerCase();
        const messageLower = formData.message.toLowerCase();

        if (subjectLower.includes('linux') || messageLower.includes('linux')) {
          customText =
            "Mention sp√©ciale du jury : votre utilisation de Linux vous fait gagner un doublon d'or open source imaginaire. F√©licitations, vous avez gagn√© !";
        } else if (subjectLower.includes('nird') || messageLower.includes('nird')) {
          customText =
            "Le comit√© NIRD vous d√©cerne la m√©daille du Village Num√©rique R√©sistant. F√©licitations, vous avez gagn√© ! votre d√©marche sera cit√©e dans toutes les tavernes p√©dagogiques.";
        }

        setTimeout(function () {
          openOverlay(customText);
          form.reset();
        }, 400);
      });

      popupClose.addEventListener('click', closeOverlay);

      overlay.addEventListener('click', function (event) {
        if (event.target === overlay) {
          closeOverlay();
        }
      });

      document.addEventListener('keydown', function (event) {
        if (event.key === 'Escape' && overlay.classList.contains('is-visible')) {
          closeOverlay();
        }
      });

      // Easter egg 1 : Konami code -> change le th√®me de la c√©r√©monie
      // (Haut, Haut, Bas, Bas, Gauche, Droite, Gauche, Droite, B, A)
      const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
      let konamiBuffer = [];

      document.addEventListener('keydown', function (event) {
        konamiBuffer.push(event.key);
        if (konamiBuffer.length > konamiSequence.length) {
          konamiBuffer.shift();
        }
        if (konamiSequence.every((key, index) => key === konamiBuffer[index])) {
          body.classList.toggle('glory-alt-theme');
        }
      });

      // Easter egg 2 : clic sur la petite ligne "Ne cliquez surtout pas ici"
      // -> mini animation + texte alternatif dans la popup
      secretClick.addEventListener('click', function () {
        secretClick.textContent = 'Trop tard, la l√©gende retiendra ce clic.';
        secretClick.style.color = '#ffdfef';
        secretClick.style.textShadow = '0 0 10px rgba(255, 216, 235, 0.9)';
      });

      // Easter egg 3 : sujet exactement "Nuit de l'Info" -> message personnalis√©
      subjectInput.addEventListener('input', function () {
        const value = subjectInput.value.trim().toLowerCase();
        if (value === "nuit de l'info" || value === 'nuit de l info') {
          popupMessage.dataset.special =
            "Le Jury OFF de la Nuit de l'Info confirme : votre formulaire entre dans le panth√©on des soumissions l√©gendaires. F√©licitations, vous avez gagn√©, et en plus avec le bon sujet.";
        } else {
          delete popupMessage.dataset.special;
        }
      });

      // Au moment d'ouvrir, si un message sp√©cial est pr√™t, on l'utilise
      const originalOpenOverlay = openOverlay;
      openOverlay = function (text) {
        const special = popupMessage.dataset.special;
        if (special) {
          originalOpenOverlay(special);
        } else {
          originalOpenOverlay(text);
        }
      };
    })();
  </script>
</body>
</html>
